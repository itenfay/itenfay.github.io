---
layout: post
title: "å¦‚ä½•è½»æ¾æå®š iOS å†…è´­é…ç½®"
header-img: "images/iap/asc_bg.png"
author: "dgynfi"
date: 2016-10-12
tag: iOS
---

## é…ç½®æµç¨‹

ä¸€ä¸ªå¼€å‘è€…è´¦å·é¦–æ¬¡é…ç½® **å†…è´­(In-App Purchase)** çš„æ–°é¡¹ç›®ï¼Œå¿…é¡»å…ˆç­¾ç½² Paid Applications Agreementï¼ˆã€Šä»˜è´¹åº”ç”¨ç¨‹åºåè®®ã€‹ï¼‰

- ä¸€ã€å¡«å†™åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡

1ã€ç™»å½• [https://appstoreconnect.apple.com](https://appstoreconnect.apple.com)ï¼Œè¿›å…¥App Store Connectã€‚

2ã€è¿›å…¥â€œåè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡â€

![é€‰æ‹©è¿›å…¥åè®®ã€ç¨åŠ¡å’Œé“¶è¡Œä¸šåŠ¡
](https://dgynfi.github.io/images/iap/atb_item.png)

3ã€ä»˜è´¹åº”ç”¨ç¨‹åºï¼Œå…ˆç­¾ç½²ã€Šä»˜è´¹åº”ç”¨ç¨‹åºåè®®ã€‹ï¼ŒåŒæ„åçŠ¶æ€å˜æ›´ä¸ºâ€œç”¨æˆ·ä¿¡æ¯å¾…å¤„ç†â€ï¼Œç­‰å¾…å®¡æ ¸ã€‚

![ç­¾ç½²åè®®åçš„çŠ¶æ€](https://dgynfi.github.io/images/iap/agre_tax_bank.png)

4ã€çŠ¶æ€æ›´æ”¹å®Œæ¯•åï¼Œç‚¹å‡»â€œå¼€å§‹è®¾ç½®ç¨åŠ¡ã€é“¶è¡Œä¸šåŠ¡å’Œè”ç³»ä¿¡æ¯â€

I) æ·»åŠ é“¶è¡Œè´¦æˆ·ï¼ŒæŒ‰ç…§è¦æ±‚å¡«å†™ç›¸å…³å†…å®¹ã€‚

![æ·»åŠ é“¶è¡Œè´¦æˆ·](https://dgynfi.github.io/images/iap/add_bank_account.png)

II) é€‰æ‹©æŠ¥ç¨è¡¨ï¼Œå¹¶å¡«å†™ã€‚

æˆ‘æ˜¯å¯çˆ±çš„ä¸­å›½å…¬æ°‘ï¼Œåœ¨ç¾å›½æœ‰æ²¡æœ‰å•†ä¸šæ´»åŠ¨ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©å¡«å¦ã€‚

![æŠ¥ç¨è¡¨-1](https://dgynfi.github.io/images/iap/tax_form.png)

![æŠ¥ç¨è¡¨-2](https://dgynfi.github.io/images/iap/u.s._commercial_actives.png)

ç„¶åç»§ç»­å¡«å†™æŠ¥ç¨è¡¨ï¼ŒæŒ‰ç…§è¦æ±‚å¡«å†™ï¼ˆè¦æ˜¯è‹±æ–‡é˜…è¯»æœ‰ç‚¹å›°éš¾ï¼Œé‚£å°±åŒå‡»ç½‘é¡µï¼Œåº”è¯¥ä¼šæœ‰ç¿»è¯‘æˆä¸­æ–‡çš„åŠŸèƒ½ï¼›å¦‚æœæ²¡æœ‰çš„è¯ï¼Œé‚£å°±ç”¨è¯å…¸æˆ–è€…å€ŸåŠ©ç¿»è¯‘å·¥å…·......ï¼Œä½ æ‡‚å¾—å“ˆï¼‰ï¼Œ ä¸è¿‡æ²¡å…³ç³»ï¼Œéƒ½æ˜¯ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚

![æŠ¥ç¨è¡¨-3](https://dgynfi.github.io/images/iap/tax_form2.png)

III) å¡«å†™è”ç³»ä¿¡æ¯

ä¸€å…±éœ€è¦å¡«å†™5ä¸ªè”ç³»ä¿¡æ¯ï¼šé«˜çº§ç®¡ç†ã€è´¢åŠ¡ã€æŠ€æœ¯ã€æ³•åŠ¡ã€è¥é”€ï¼ˆå¯é‡å¤ï¼Œåƒæˆ‘è¿™ç§äººæ‰5ä¸ªèŒä½éƒ½æ˜¯æˆ‘ï¼Œå¼€ç©ç¬‘çš„ï¼Œå‹¿å½“çœŸï¼‰ã€‚

![å¡«å†™è”ç³»ä¿¡æ¯-1](https://dgynfi.github.io/images/iap/tax_bank_contact.png)

![å¡«å†™è”ç³»ä¿¡æ¯-2](https://dgynfi.github.io/images/iap/edit_contacts.png)

- äºŒã€æ·»åŠ  App å†…è´­ä¹°é¡¹ç›®

1ã€ä¸Šé¢çš„ç¨åŠ¡è¡¨å¡«å®Œäº†ä¹‹åï¼Œç‚¹å‡»â€œæˆ‘çš„ Appâ€ï¼Œè¿›å…¥åˆ°é¡¹ç›® App çš„ä¿¡æ¯é¡µï¼Œç‚¹å‡»åŠŸèƒ½ï¼Œåœ¨å¼¹å‡ºçš„é¡µé¢ç‚¹å‡» App å†…è´­ä¹°é¡¹ç›®åé¢çš„+ã€‚

![æˆ‘çš„ App](https://dgynfi.github.io/images/iap/myapp_item.png)

![æ·»åŠ  App å†…è´­ä¹°é¡¹ç›®](https://dgynfi.github.io/images/iap/add_iap_items.png)

ä»¥æ¶ˆè€—å‹ä¸ºä¾‹

![æ¶ˆè€—å‹é¡¹ç›®](https://dgynfi.github.io/images/iap/iap_item_types.png)

2ã€åˆ›å»ºå®Œæˆä¹‹åï¼Œå¡«å†™å†…è´­ä¹°é¡¹ç›®ä¿¡æ¯

![å†…è´­ä¹°é¡¹ç›®ä¿¡æ¯å¡«å†™-1](https://dgynfi.github.io/images/iap/iap_item_config.png)

![å†…è´­ä¹°é¡¹ç›®ä¿¡æ¯å¡«å†™-2](https://dgynfi.github.io/images/iap/iap_item_localization.png)

![å†…è´­ä¹°é¡¹ç›®ä¿¡æ¯å¡«å†™-3](https://dgynfi.github.io/images/iap/iap_item_astg.png)

![å†…è´­ä¹°é¡¹ç›®ä¿¡æ¯å¡«å†™-4](https://dgynfi.github.io/images/iap/iap_item_mark.png)

3ã€å¡«å†™ä¿¡æ¯å®Œæˆäº†ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ â€œå­˜å‚¨â€ï¼Œç„¶åç‚¹å‡»å·¦è¾¹ â€œApp å†…è´­ä¹°é¡¹ç›®â€ã€‚å‡ºç°â€œå…ƒæ•°æ®ä¸¢å¤±â€è¯´æ˜é‡Œé¢ä¿¡æ¯æ²¡å¡«å†™å®Œæ•´ï¼Œåœ¨ç‚¹è¿›å»å¡«å†™ï¼Œç›´åˆ°æ˜¾ç¤ºâ€œå‡†å¤‡æäº¤â€ã€‚

![å…ƒæ•°æ®ä¸¢å¤±](https://dgynfi.github.io/images/iap/iap_item_warning.png)

- ä¸‰ã€æ·»åŠ æ²™ç®±æµ‹è¯•å‘˜

å®Œæˆæ·»åŠ å†…è´­ä¹°é¡¹ç›®åï¼Œç‚¹å‡»â€œç”¨æˆ·å’Œè®¿é—®â€ï¼Œé€‰æ‹©â€œæ²™ç®±æŠ€æœ¯å­¦æµ‹è¯•å‘˜â€ï¼Œåœ¨å¼¹å‡ºçš„é¡µé¢é€‰æ‹©ç”¨æˆ·ï¼Œç‚¹å‡»+ï¼Œæ·»åŠ æ²™ç®±æµ‹è¯•å‘˜ã€‚

![æ·»åŠ æ²™ç®±æµ‹è¯•å‘˜-1](https://dgynfi.github.io/images/iap/add_sandbox_tester.png)

![æ·»åŠ æ²™ç®±æµ‹è¯•å‘˜-2](https://dgynfi.github.io/images/iap/sandbox_tester_profile.png)

- å››ã€æ‰“å¼€ Xcode åº”ç”¨å†…è´­ä¹°é…ç½®

æˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹é‡Œé…ç½®å¥½è¯ä¹¦ï¼Œæµ‹è¯•è¯ä¹¦æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºå†…è´­éœ€è¦è¿æ¥åˆ°è‹¹æœçš„App Storeï¼Œéœ€è¦æ­£å¼çš„æµ‹è¯•è¯ä¹¦æ‰èƒ½æµ‹è¯•ï¼ŒåŒæ—¶æ‰“å¼€å·¥ç¨‹ä¸­çš„è¿™ä¸€é…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![åº”ç”¨å†…è´­ä¹°é…ç½®](https://dgynfi.github.io/images/iap/turnon_iap_capabilities.png)

## å¼€å‘å®ç°

æ¨èé˜…è¯»[ã€ŠiOS å†…è´­å®Œæ•´çš„ç¼–ç¨‹æŒ‡å—ã€‹](https://dgynfi.github.io/2016/10/16/in-app-purchase-complete-programming-guide-for-iOS/)ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†é˜è¿°äº†ã€‚

---

æœ€åï¼Œæƒ³äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹æˆ‘çš„ Demoï¼Œè®°å¾—ç»™ä¸ª Starï¼ŒğŸ˜ğŸ˜

Demo ( Objective-C )ï¼š[æˆ³è¿™é‡Œ](https://github.com/dgynfi/DYFStoreKit) <br >
Demo ( Swift )ï¼š[æˆ³è¿™é‡Œ](https://github.com/dgynfi/DYFStore)
